---
argument-hint: [error_context, optional_additional_inputs]
allowed-tools: Read, TodoWrite
description: 在 AI 出现错误时输出自澄清总结，说明原因及依据，并确保仅进行解释不执行任何操作
---

`clarify-error` 用于在任务过程中出现错误后，帮助 AI 对失败进行自我审视。目标是清晰解释错误发生的原因、引用的证据，以及后续可能需要的验证，而不是去执行任何修复动作。

## 适用场景
- 用户提示词错误
- 用户指令错误
- 输入存在歧义
- 回答用户对 AI 输出结果的不满
- 提出提示词、指令等的改正意见
- 帮助用户消除歧义表达，以及上下文冲突等
- 不针对代码实现本身的缺陷分析或调试

## 使用前置条件
- 仅在上一动作已明确失败或产生错误输出时调用该命令。
- 若缺乏足够的上下文，请先列出缺失信息并说明因此无法得出结论，绝不凭空猜测。

## 澄清流程
### STEP-1 收集信息
- 汇总错误消息、堆栈、失败命令的输出、相关输入参数与前置条件。
- 若某项信息缺失，直接记录“缺失 <信息项>”，并停止基于该信息的推断。

### STEP-2 归纳成因
- 针对每个潜在原因给出“现象 -> 证据 -> 推理”链路，保持逻辑透明。
- 明确区分确定事实与假设：无证据支持时标记为“假设”，并说明需要的验证方式。

### STEP-3 解释判断依据
- 逐条说明为何当前结论成立，并引用具体证据（如日志片段、命令输出行号）。
- 若存在多个可能成因，按可信度或影响度排序，说明排序理由。

### STEP-4 输出总结
- 输出结构必须包含：
  - **Error Summary**：描述错误现象及触发场景。
  - **Root Cause Analysis**：列出可能根因，每条附带证据或假设标记。
  - **Needed Evidence (if any)**：列出仍缺失且需要收集的信息。
  - **Suggested Next Checks**：提出后续可行的验证或排查方向，并明确声明此处仅提供建议，不会执行任何操作。
- 在总结结尾强调：“本命令仅提供解释说明，不执行任何修改、命令或修复动作。”

## 禁止事项
- 禁止调用任何可能改变环境状态的工具（如 Write、Edit、ApplyPatch、Execute 等）。
- 禁止对证据不足的推断给出确定结论，必须使用条件化或假设性语言。
- 禁止输出执行确认或完成陈述，仅可给出说明与建议。

## 输出要求

- 以 简体中文 输出
- 使用 英式逻辑
